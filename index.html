<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Essential English Communication</title>

<style>
* {
    box-sizing: border-box;
    font-family: "Segoe UI", Arial, sans-serif;
}

body {
    margin: 0;
    height: 100vh;
    background: url("class.jpg") center / cover no-repeat;
    background-position: calc(50% - 12px) center; 
    overflow: hidden;
    color: #333;
    background-attachment: fixed;
}

/* Dark overlay */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    z-index: 0;
}

/* ================= APP WRAPPER ================= */
#app {
    position: relative;
    z-index: 2;
    width: 100%;
    text-align: center;
    padding-top: 5px;
    transition: opacity 1.2s ease, transform 1.2s ease;
}

#app.fade-out {
    opacity: 0;
    transform: translateY(-10px);
}

/* ================= SEARCH ================= */
.search-bar {
    margin: 18px auto 10px;
    width: 520px;
    max-width: 90%;
    position: relative;
    opacity: 0;
    transform: translateY(10px);
    animation: searchFade 2s ease forwards;
    animation-delay: 1.3s;
    z-index: 1001;
}

.search-bar input {
    width: 100%;
    padding: 14px 16px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.1);
    outline: none;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(5px);
    color: white;
    font-size: 15px;
    transition: all 0.3s ease;
}

.search-results {
    position: absolute;
    top: 105%;
    left: 0;
    right: 0;
    background: rgba(15, 15, 15, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 6px;
    border: 1px solid rgba(157, 255, 179, 0.2);
    max-height: 280px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
    text-align: left;
}

.result-item {
    padding: 12px 16px;
    cursor: pointer;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    transition: 0.2s;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
    color: white;
}

.result-item:hover {
    background: rgba(157, 255, 179, 0.15);
    color: #9dffb3;
}

/* ================= MENU ================= */
.menu {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 12px;
    opacity: 0;
    animation: menuFade 1.8s ease forwards;
    animation-delay: 1.9s;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.menu a {
    color: white;
    text-decoration: none;
    font-size: 15px;
    font-weight: 500;
    letter-spacing: 1px;
    opacity: 0.8;
    transition: all 0.6s ease;
    display: inline-block;
}

.search-active .menu a:nth-child(1),
.search-active .menu a:nth-child(2) { transform: translateX(-150px); opacity: 0; }
.search-active .menu a:nth-child(3),
.search-active .menu a:nth-child(4) { transform: translateX(150px); opacity: 0; }

@keyframes searchFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes menuFade { from { opacity: 0; } to { opacity: 1; } }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body id="mainBody">

<div id="app">

    <div class="search-bar">
        <input type="text" id="ai-search-input" placeholder="Search memories (lớp 10, mdmx, culture night...)" autocomplete="off">
        <div id="ai-results" class="search-results"></div>
    </div>

    <div class="menu">
        <a href="about.html" onclick="navigate(event, 'about.html', true)">ABOUT US</a>
        <a href="album.html" onclick="navigate(event, 'lessons.html')">LESSONS</a>
        <a href="thought.html" onclick="navigate(event, 'companion.html')">COMPANION</a>
        <a href="chat.html" onclick="navigate(event, 'help.html')">HELP</a>
    </div>
</div>

<script>
const searchInput = document.getElementById('ai-search-input');
const resultsBox = document.getElementById('ai-results');
const mainBody = document.getElementById('mainBody');

const albumKeywords = ['lớp 10', 'lớp 11', 'lớp 12', 'mdmx', 'mừng đảng mừng xuân', 'mđmx', 'culture night', 'cn', 'vhdg', 'văn học dân gian', 'ghat', 'gian hàng ẩm thực'];
const teacherKeywords = ['giáo viên', 'thầy cô', 'nguyễn đình tùng', 'phạm trương thanh tùng', 'trần ngọc bích', 'chủ nhiệm'];

searchInput.addEventListener('focus', () => { mainBody.classList.add('search-active'); });
searchInput.addEventListener('blur', () => {
    setTimeout(() => {
        mainBody.classList.remove('search-active');
        resultsBox.style.display = 'none';
    }, 200);
});

function triggerTransition(url) {
    mainBody.classList.add('navigating');
    document.getElementById("app").classList.add("fade-out");
    setTimeout(() => { window.location.href = url; }, 1200);
}

searchInput.addEventListener('input', (e) => {
    const val = e.target.value.toLowerCase().trim();
    resultsBox.innerHTML = '';
    if (val.length < 1) { resultsBox.style.display = 'none'; return; }

    let found = false;
    albumKeywords.forEach(k => {
        if (k.includes(val)) {
            addResultItem(k.toUpperCase(), 'fa-images', () => { triggerTransition(`album.html#${k.replace(/\s/g, '')}`); });
            found = true;
        }
    });

    teacherKeywords.forEach(k => {
        if (k.includes(val)) {
            addResultItem(k.toUpperCase(), 'fa-chalkboard-teacher', () => { triggerTransition(`about.html#lead`); });
            found = true;
        }
    });

    if (!found && val.length > 1) {
        addResultItem(`Tìm cảm nghĩ về: ${val.toUpperCase()}`, 'fa-comment-dots', () => { triggerTransition(`thought.html?search=${val}`); });
    }
    resultsBox.style.display = resultsBox.innerHTML === '' ? 'none' : 'block';
});

function addResultItem(text, icon, action) {
    const div = document.createElement('div');
    div.className = 'result-item';
    div.innerHTML = `<i class="fas ${icon}"></i> <span>${text}</span>`;
    div.onclick = action;
    resultsBox.appendChild(div);
}

/* ================= NAVIGATE ================= */
function navigate(e, url, isAbout = false) {
    e.preventDefault();
    if(isAbout) document.body.classList.add("sink-in-right");
    triggerTransition(url);
}
</script>

</body>
</html>


